// koffee 1.12.0
var _, empty, ref,
    indexOf = [].indexOf;

ref = require('kxk'), empty = ref.empty, _ = ref._;

module.exports = {
    actions: {
        menu: 'Select',
        highlightWordAndAddToSelection: {
            name: 'Highlight and Select Word',
            text: 'highlights all occurrences of text in selection or word at cursor and selects the first|next highlight.',
            combo: 'command+d',
            accel: 'ctrl+d'
        },
        selectAllWords: {
            name: 'Select All Words',
            combo: 'command+alt+d',
            accel: 'alt+ctrl+d'
        },
        removeSelectedHighlight: {
            name: 'Remove Highlighted Word from Selection',
            text: "does the inverse of 'highlight and select' word",
            combo: 'command+shift+d',
            accel: 'ctrl+shift+d'
        },
        highlightTextOfSelectionOrWordAtCursor: {
            name: 'Highlight and Select Word',
            text: 'highlights all occurrences of text in selection or word at cursor and selects it. expands to the left if already selected.',
            combo: 'command+e',
            accels: ['ctrl+e', 'alt+e']
        }
    },
    highlightText: function(text, opt) {
        var hls, ref1, ref2, ref3;
        hls = this.rangesForText(text, opt);
        if (hls.length) {
            switch (opt != null ? opt.select : void 0) {
                case 'after':
                    this.selectSingleRange((ref1 = rangeAfterPosInRanges(this.cursorPos(), hls)) != null ? ref1 : _.first(hls));
                    break;
                case 'before':
                    this.selectSingleRange((ref2 = rangeBeforePosInRanges(this.cursorPos(), hls)) != null ? ref2 : _.first(hls));
                    break;
                case 'first':
                    this.selectSingleRange(_.first(hls));
            }
            if (!(opt != null ? opt.noScroll : void 0)) {
                if ((ref3 = this.scroll) != null) {
                    ref3.cursorToTop();
                }
            }
        }
        this.setHighlights(hls);
        this.renderHighlights();
        return this.emit('highlight');
    },
    wordHighlights: function() {
        return this.highlights().filter(function(h) {
            var ref1, ref2, ref3, ref4;
            return !((ref1 = h[2]) != null ? (ref2 = ref1.clss) != null ? ref2.startsWith('stringmatch') : void 0 : void 0) && !((ref3 = h[2]) != null ? (ref4 = ref3.clss) != null ? ref4.startsWith('bracketmatch') : void 0 : void 0);
        });
    },
    highlightForFind: function() {
        var cp, cursorInWordHighlight, wordHighlights;
        if (this.numSelections() === 1 && !empty(this.textInRange(this.selection(0)).trim())) {
            this.highlightText(this.textInRange(this.selection(0)));
        } else {
            cp = this.cursorPos();
            wordHighlights = this.wordHighlights();
            cursorInWordHighlight = wordHighlights.length;
            if (!cursorInWordHighlight) {
                this.highlightTextOfSelectionOrWordAtCursor();
            }
        }
        return this.selectNextHighlight();
    },
    highlightWordAndAddToSelection: function() {
        var cp, cursorInWordHighlight, r, ref1, sr, wordHighlights;
        cp = this.cursorPos();
        wordHighlights = this.wordHighlights();
        cursorInWordHighlight = wordHighlights.length && rangeAtPosInRanges(cp, wordHighlights);
        if (!cursorInWordHighlight) {
            return this.highlightTextOfSelectionOrWordAtCursor();
        } else {
            this["do"].start();
            sr = rangeAtPosInRanges(cp, this["do"].selections());
            if (sr) {
                r = rangeAfterPosInRanges(cp, wordHighlights);
            } else {
                r = rangeAtPosInRanges(cp, wordHighlights);
            }
            if (r != null) {
                r;
            } else {
                r = wordHighlights[0];
            }
            this.addRangeToSelection(r);
            if ((ref1 = this.scroll) != null) {
                ref1.cursorToTop();
            }
            return this["do"].end();
        }
    },
    selectAllWords: function() {
        this.highlightWordAndAddToSelection();
        this["do"].start();
        this["do"].select(this["do"].highlights());
        if (this["do"].numSelections()) {
            this["do"].setCursors(endPositionsFromRanges(this["do"].selections()), {
                main: 'closest'
            });
        }
        return this["do"].end();
    },
    highlightTextOfSelectionOrWordAtCursor: function() {
        var largerRange, largerText, nr, nt, ref1, ref2, sel, srange, text;
        if (this.numSelections() === 0) {
            srange = this.rangeForRealWordAtPos(this.cursorPos());
            if (empty(this.textInRange(srange).trim())) {
                this.clearHighlights();
                return;
            }
            this.selectSingleRange(srange);
        }
        sel = this.selection(0);
        text = this.textInRange(sel);
        if (text.length) {
            if (this.numHighlights()) {
                if (text === this.textInRange(this.highlight(0))) {
                    largerRange = [sel[0], [sel[1][0] - 1, sel[1][1]]];
                    largerText = this.textInRange(largerRange);
                    if ((ref1 = largerText[0], indexOf.call("@#$%&*+-!?:.'\"/", ref1) >= 0) || /[A-Za-z]/.test(largerText[0])) {
                        if (ref2 = largerText[0], indexOf.call("'\"", ref2) >= 0) {
                            nr = [sel[0], [sel[1][0] - 1, sel[1][1] + 1]];
                            nt = this.textInRange(nr);
                            if (nt[nt.length - 1] === largerText[0]) {
                                largerText = nt;
                                largerRange = nr;
                            }
                        } else if (/[A-Za-z]/.test(largerText[0])) {
                            while (largerRange[1][0] > 0 && /[A-Za-z]/.test(this.line(largerRange[0])[largerRange[1][0] - 1])) {
                                largerRange[1][0] -= 1;
                                largerText = this.textInRange(largerRange);
                            }
                        }
                        text = largerText;
                        if (this.numSelections() === 1) {
                            this.selectSingleRange(largerRange);
                        }
                    }
                }
            }
            this.setHighlights(this.rangesForText(text, {
                max: 9999
            }));
            if (this.renderHighlights != null) {
                this.renderHighlights();
                this.emit('highlight');
                return this.focus();
            }
        }
    },
    clearHighlights: function() {
        if (this.numHighlights()) {
            this.setHighlights([]);
            return this.emit('highlight');
        }
    },
    removeSelectedHighlight: function() {
        var cp, hr, sel, sr;
        cp = this.cursorPos();
        sel = this.selections();
        sr = rangeAtPosInRanges(cp, sel);
        hr = rangeAtPosInRanges(cp, this.highlights());
        if (sr && hr) {
            return this.removeSelectionAtIndex(sel.indexOf(sr));
        }
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlnaGxpZ2h0LmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uL2NvZmZlZS9lZGl0b3IvYWN0aW9ucyIsInNvdXJjZXMiOlsiaGlnaGxpZ2h0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBT0EsSUFBQSxhQUFBO0lBQUE7O0FBQUEsTUFBZSxPQUFBLENBQVEsS0FBUixDQUFmLEVBQUUsaUJBQUYsRUFBUzs7QUFFVCxNQUFNLENBQUMsT0FBUCxHQUVJO0lBQUEsT0FBQSxFQUNJO1FBQUEsSUFBQSxFQUFNLFFBQU47UUFFQSw4QkFBQSxFQUNJO1lBQUEsSUFBQSxFQUFPLDJCQUFQO1lBQ0EsSUFBQSxFQUFPLHlHQURQO1lBRUEsS0FBQSxFQUFPLFdBRlA7WUFHQSxLQUFBLEVBQU8sUUFIUDtTQUhKO1FBUUEsY0FBQSxFQUNJO1lBQUEsSUFBQSxFQUFPLGtCQUFQO1lBQ0EsS0FBQSxFQUFPLGVBRFA7WUFFQSxLQUFBLEVBQU8sWUFGUDtTQVRKO1FBYUEsdUJBQUEsRUFDSTtZQUFBLElBQUEsRUFBTSx3Q0FBTjtZQUNBLElBQUEsRUFBTyxpREFEUDtZQUVBLEtBQUEsRUFBTyxpQkFGUDtZQUdBLEtBQUEsRUFBTyxjQUhQO1NBZEo7UUFtQkEsc0NBQUEsRUFDSTtZQUFBLElBQUEsRUFBTywyQkFBUDtZQUNBLElBQUEsRUFBTyw0SEFEUDtZQUVBLEtBQUEsRUFBTyxXQUZQO1lBR0EsTUFBQSxFQUFRLENBQUMsUUFBRCxFQUFVLE9BQVYsQ0FIUjtTQXBCSjtLQURKO0lBZ0NBLGFBQUEsRUFBZSxTQUFDLElBQUQsRUFBTyxHQUFQO0FBRVgsWUFBQTtRQUFBLEdBQUEsR0FBTSxJQUFDLENBQUEsYUFBRCxDQUFlLElBQWYsRUFBcUIsR0FBckI7UUFDTixJQUFHLEdBQUcsQ0FBQyxNQUFQO0FBQ0ksa0NBQU8sR0FBRyxDQUFFLGVBQVo7QUFBQSxxQkFDUyxPQURUO29CQUN1QixJQUFDLENBQUEsaUJBQUQsd0VBQThELENBQUMsQ0FBQyxLQUFGLENBQVEsR0FB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OzRCQUZqQixDQURDOzt3QkFJTCxJQUFBLEdBQU87d0JBQ1AsSUFBa0MsSUFBQyxDQUFBLGFBQUQsQ0FBQSxDQUFBLEtBQW9CLENBQXREOzRCQUFBLElBQUMsQ0FBQSxpQkFBRCxDQUFtQixXQUFuQixFQUFBO3lCQVpKO3FCQUhKO2lCQURKOztZQWtCQSxJQUFDLENBQUEsYUFBRCxDQUFlLElBQUMsQ0FBQSxhQUFELENBQWUsSUFBZixFQUFxQjtnQkFBQSxHQUFBLEVBQUksSUFBSjthQUFyQixDQUFmO1lBR0EsSUFBRyw2QkFBSDtnQkFDSSxJQUFDLENBQUEsZ0JBQUQsQ0FBQTtnQkFDQSxJQUFDLENBQUEsSUFBRCxDQUFNLFdBQU47dUJBRUEsSUFBQyxDQUFBLEtBQUQsQ0FBQSxFQUpKO2FBdkJKOztJQVhvQyxDQW5HeEM7SUFpSkEsZUFBQSxFQUFpQixTQUFBO1FBRWIsSUFBRyxJQUFDLENBQUEsYUFBRCxDQUFBLENBQUg7WUFDSSxJQUFDLENBQUEsYUFBRCxDQUFlLEVBQWY7bUJBQ0EsSUFBQyxDQUFBLElBQUQsQ0FBTSxXQUFOLEVBRko7O0lBRmEsQ0FqSmpCO0lBNkpBLHVCQUFBLEVBQXlCLFNBQUE7QUFFckIsWUFBQTtRQUFBLEVBQUEsR0FBSyxJQUFDLENBQUEsU0FBRCxDQUFBO1FBQ0wsR0FBQSxHQUFNLElBQUMsQ0FBQSxVQUFELENBQUE7UUFDTixFQUFBLEdBQUssa0JBQUEsQ0FBbUIsRUFBbkIsRUFBdUIsR0FBdkI7UUFDTCxFQUFBLEdBQUssa0JBQUEsQ0FBbUIsRUFBbkIsRUFBdUIsSUFBQyxDQUFBLFVBQUQsQ0FBQSxDQUF2QjtRQUNMLElBQUcsRUFBQSxJQUFPLEVBQVY7bUJBQ0ksSUFBQyxDQUFBLHNCQUFELENBQXdCLEdBQUcsQ0FBQyxPQUFKLENBQVksRUFBWixDQUF4QixFQURKOztJQU5xQixDQTdKekIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiMgMDAwICAgMDAwICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMDAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgMDAwICAgICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4jIDAwMDAwMDAwMCAgMDAwICAwMDAgIDAwMDAgIDAwMDAwMDAwMCAgMDAwICAgICAgMDAwICAwMDAgIDAwMDAgIDAwMDAwMDAwMCAgICAgMDAwICAgICBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG5cbnsgZW1wdHksIF8gfSA9IHJlcXVpcmUgJ2t4aydcblxubW9kdWxlLmV4cG9ydHMgPSBcblxuICAgIGFjdGlvbnM6XG4gICAgICAgIG1lbnU6ICdTZWxlY3QnXG4gICAgICAgIFxuICAgICAgICBoaWdobGlnaHRXb3JkQW5kQWRkVG9TZWxlY3Rpb246XG4gICAgICAgICAgICBuYW1lOiAgJ0hpZ2hsaWdodCBhbmQgU2VsZWN0IFdvcmQnXG4gICAgICAgICAgICB0ZXh0OiAgJ2hpZ2hsaWdodHMgYWxsIG9jY3VycmVuY2VzIG9mIHRleHQgaW4gc2VsZWN0aW9uIG9yIHdvcmQgYXQgY3Vyc29yIGFuZCBzZWxlY3RzIHRoZSBmaXJzdHxuZXh0IGhpZ2hsaWdodC4nXG4gICAgICAgICAgICBjb21ibzogJ2NvbW1hbmQrZCdcbiAgICAgICAgICAgIGFjY2VsOiAnY3RybCtkJ1xuICAgICAgICAgICAgXG4gICAgICAgIHNlbGVjdEFsbFdvcmRzOlxuICAgICAgICAgICAgbmFtZTogICdTZWxlY3QgQWxsIFdvcmRzJ1xuICAgICAgICAgICAgY29tYm86ICdjb21tYW5kK2FsdCtkJ1xuICAgICAgICAgICAgYWNjZWw6ICdhbHQrY3RybCtkJ1xuICAgICAgICAgICAgXG4gICAgICAgIHJlbW92ZVNlbGVjdGVkSGlnaGxpZ2h0OlxuICAgICAgICAgICAgbmFtZTogJ1JlbW92ZSBIaWdobGlnaHRlZCBXb3JkIGZyb20gU2VsZWN0aW9uJ1xuICAgICAgICAgICAgdGV4dDogIFwiZG9lcyB0aGUgaW52ZXJzZSBvZiAnaGlnaGxpZ2h0IGFuZCBzZWxlY3QnIHdvcmRcIlxuICAgICAgICAgICAgY29tYm86ICdjb21tYW5kK3NoaWZ0K2QnXG4gICAgICAgICAgICBhY2NlbDogJ2N0cmwrc2hpZnQrZCdcbiAgICAgICAgICAgIFxuICAgICAgICBoaWdobGlnaHRUZXh0T2ZTZWxlY3Rpb25PcldvcmRBdEN1cnNvcjpcbiAgICAgICAgICAgIG5hbWU6ICAnSGlnaGxpZ2h0IGFuZCBTZWxlY3QgV29yZCdcbiAgICAgICAgICAgIHRleHQ6ICAnaGlnaGxpZ2h0cyBhbGwgb2NjdXJyZW5jZXMgb2YgdGV4dCBpbiBzZWxlY3Rpb24gb3Igd29yZCBhdCBjdXJzb3IgYW5kIHNlbGVjdHMgaXQuIGV4cGFuZHMgdG8gdGhlIGxlZnQgaWYgYWxyZWFkeSBzZWxlY3RlZC4nXG4gICAgICAgICAgICBjb21ibzogJ2NvbW1hbmQrZSdcbiAgICAgICAgICAgIGFjY2VsczogWydjdHJsK2UnICdhbHQrZSddXG5cbiAgICAjIDAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICBcbiAgICAjICAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgMDAwICAgICAgMDAwICAgICBcbiAgICAjICAgIDAwMCAgICAgMDAwMDAwMCAgICAgMDAwMDAgICAgICAgMDAwICAgICBcbiAgICAjICAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgMDAwICAgICAgMDAwICAgICBcbiAgICAjICAgIDAwMCAgICAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiAgICBcbiAgICBoaWdobGlnaHRUZXh0OiAodGV4dCwgb3B0KSAtPiAjIGNhbGxlZCBmcm9tIGZpbmQgY29tbWFuZFxuICAgICAgICBcbiAgICAgICAgaGxzID0gQHJhbmdlc0ZvclRleHQgdGV4dCwgb3B0XG4gICAgICAgIGlmIGhscy5sZW5ndGhcbiAgICAgICAgICAgIHN3aXRjaCBvcHQ/LnNlbGVjdFxuICAgICAgICAgICAgICAgIHdoZW4gJ2FmdGVyJyAgdGhlbiBAc2VsZWN0U2luZ2xlUmFuZ2UgcmFuZ2VBZnRlclBvc0luUmFuZ2VzKEBjdXJzb3JQb3MoKSwgaGxzKSA/IF8uZmlyc3QgaGxzXG4gICAgICAgICAgICAgICAgd2hlbiAnYmVmb3JlJyB0aGVuIEBzZWxlY3RTaW5nbGVSYW5nZSByYW5nZUJlZm9yZVBvc0luUmFuZ2VzKEBjdXJzb3JQb3MoKSwgaGxzKSA/IF8uZmlyc3QgaGxzXG4gICAgICAgICAgICAgICAgd2hlbiAnZmlyc3QnICB0aGVuIEBzZWxlY3RTaW5nbGVSYW5nZSBfLmZpcnN0IGhsc1xuICAgICAgICAgICAgQHNjcm9sbD8uY3Vyc29yVG9Ub3AoKSBpZiBub3Qgb3B0Py5ub1Njcm9sbCAjIDwgc3Vja3MhXG4gICAgICAgIEBzZXRIaWdobGlnaHRzIGhsc1xuICAgICAgICBAcmVuZGVySGlnaGxpZ2h0cygpXG4gICAgICAgIEBlbWl0ICdoaWdobGlnaHQnXG4gICAgXG4gICAgIyAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAgICAwMDAwMDAwICBcbiAgICAjIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgICAgMDAwICBcbiAgICAjIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIFxuICAgICAgICBcbiAgICB3b3JkSGlnaGxpZ2h0czogLT4gQGhpZ2hsaWdodHMoKS5maWx0ZXIgKGgpIC0+IG5vdCBoWzJdPy5jbHNzPy5zdGFydHNXaXRoKCdzdHJpbmdtYXRjaCcpIGFuZCBub3QgaFsyXT8uY2xzcz8uc3RhcnRzV2l0aCgnYnJhY2tldG1hdGNoJylcblxuICAgIGhpZ2hsaWdodEZvckZpbmQ6IC0+XG4gICAgICAgIFxuICAgICAgICBpZiBAbnVtU2VsZWN0aW9ucygpID09IDEgYW5kIG5vdCBlbXB0eSBAdGV4dEluUmFuZ2UoQHNlbGVjdGlvbiAwKS50cmltKClcbiAgICAgICAgICAgIEBoaWdobGlnaHRUZXh0IEB0ZXh0SW5SYW5nZShAc2VsZWN0aW9uIDApXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNwID0gQGN1cnNvclBvcygpXG4gICAgICAgICAgICB3b3JkSGlnaGxpZ2h0cyA9IEB3b3JkSGlnaGxpZ2h0cygpXG4gICAgICAgICAgICBjdXJzb3JJbldvcmRIaWdobGlnaHQgPSB3b3JkSGlnaGxpZ2h0cy5sZW5ndGggI2FuZCByYW5nZUF0UG9zSW5SYW5nZXMgY3AsIHdvcmRIaWdobGlnaHRzXG4gICAgICAgICAgICBpZiBub3QgY3Vyc29ySW5Xb3JkSGlnaGxpZ2h0XG4gICAgICAgICAgICAgICAgQGhpZ2hsaWdodFRleHRPZlNlbGVjdGlvbk9yV29yZEF0Q3Vyc29yKCkgIyB0aGlzIGFsc28gc2VsZWN0c1xuICAgICAgICBAc2VsZWN0TmV4dEhpZ2hsaWdodCgpXG4gICAgXG4gICAgaGlnaGxpZ2h0V29yZEFuZEFkZFRvU2VsZWN0aW9uOiAtPiAjIGNvbW1hbmQrZFxuICAgICAgICBcbiAgICAgICAgY3AgPSBAY3Vyc29yUG9zKClcbiAgICAgICAgd29yZEhpZ2hsaWdodHMgPSBAd29yZEhpZ2hsaWdodHMoKVxuICAgICAgICBjdXJzb3JJbldvcmRIaWdobGlnaHQgPSB3b3JkSGlnaGxpZ2h0cy5sZW5ndGggYW5kIHJhbmdlQXRQb3NJblJhbmdlcyBjcCwgd29yZEhpZ2hsaWdodHNcbiAgICAgICAgaWYgbm90IGN1cnNvckluV29yZEhpZ2hsaWdodFxuICAgICAgICAgICAgQGhpZ2hsaWdodFRleHRPZlNlbGVjdGlvbk9yV29yZEF0Q3Vyc29yKCkgIyB0aGlzIGFsc28gc2VsZWN0c1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBAZG8uc3RhcnQoKVxuICAgICAgICAgICAgc3IgPSByYW5nZUF0UG9zSW5SYW5nZXMgY3AsIEBkby5zZWxlY3Rpb25zKClcbiAgICAgICAgICAgIGlmIHNyICMgY3Vyc29yIGluIHNlbGVjdGlvbiAtPiBzZWxlY3QgbmV4dCBoaWdobGlnaHRcbiAgICAgICAgICAgICAgICByID0gcmFuZ2VBZnRlclBvc0luUmFuZ2VzIGNwLCB3b3JkSGlnaGxpZ2h0c1xuICAgICAgICAgICAgZWxzZSAjIHNlbGVjdCBjdXJyZW50IGhpZ2hsaWdodCBmaXJzdFxuICAgICAgICAgICAgICAgIHIgPSByYW5nZUF0UG9zSW5SYW5nZXMgY3AsIHdvcmRIaWdobGlnaHRzXG4gICAgICAgICAgICByID89IHdvcmRIaWdobGlnaHRzWzBdXG4gICAgICAgICAgICBAYWRkUmFuZ2VUb1NlbGVjdGlvbiByXG4gICAgICAgICAgICBAc2Nyb2xsPy5jdXJzb3JUb1RvcCgpICMgPCBzdWNrcyFcbiAgICAgICAgICAgIEBkby5lbmQoKVxuXG4gICAgc2VsZWN0QWxsV29yZHM6IC0+ICMgY29tbWFuZCthbHQrZFxuICAgICAgICBcbiAgICAgICAgQGhpZ2hsaWdodFdvcmRBbmRBZGRUb1NlbGVjdGlvbigpXG4gICAgICAgIEBkby5zdGFydCgpXG4gICAgICAgIEBkby5zZWxlY3QgQGRvLmhpZ2hsaWdodHMoKVxuICAgICAgICBpZiBAZG8ubnVtU2VsZWN0aW9ucygpXG4gICAgICAgICAgICBAZG8uc2V0Q3Vyc29ycyBlbmRQb3NpdGlvbnNGcm9tUmFuZ2VzKEBkby5zZWxlY3Rpb25zKCkpLCBtYWluOiAnY2xvc2VzdCdcbiAgICAgICAgQGRvLmVuZCgpXG5cbiAgICAjICAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgICAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICAwMDAgICAgICAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgXG4gICAgIyAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgICAgIDAwMDAwMDAgICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICBcbiAgICAjICAgICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIFxuICAgICMgMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgaGlnaGxpZ2h0VGV4dE9mU2VsZWN0aW9uT3JXb3JkQXRDdXJzb3I6IC0+ICMgY29tbWFuZCtlICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIGlmIEBudW1TZWxlY3Rpb25zKCkgPT0gMFxuICAgICAgICAgICAgc3JhbmdlID0gQHJhbmdlRm9yUmVhbFdvcmRBdFBvcyBAY3Vyc29yUG9zKClcbiAgICAgICAgICAgIGlmIGVtcHR5IEB0ZXh0SW5SYW5nZShzcmFuZ2UpLnRyaW0oKVxuICAgICAgICAgICAgICAgIEBjbGVhckhpZ2hsaWdodHMoKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgQHNlbGVjdFNpbmdsZVJhbmdlIHNyYW5nZVxuICAgICAgICBcbiAgICAgICAgc2VsID0gQHNlbGVjdGlvbiAwICAgICBcbiAgICAgICAgdGV4dCA9IEB0ZXh0SW5SYW5nZSBzZWxcbiAgICAgICAgaWYgdGV4dC5sZW5ndGhcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgQG51bUhpZ2hsaWdodHMoKVxuICAgICAgICAgICAgICAgIGlmIHRleHQgPT0gQHRleHRJblJhbmdlIEBoaWdobGlnaHQgMCAjIHNlZSBpZiB3ZSBjYW4gZ3JvdyB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgbGFyZ2VyUmFuZ2UgPSBbc2VsWzBdLCBbc2VsWzFdWzBdLTEsIHNlbFsxXVsxXV1dXG4gICAgICAgICAgICAgICAgICAgIGxhcmdlclRleHQgPSBAdGV4dEluUmFuZ2UgbGFyZ2VyUmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgaWYgbGFyZ2VyVGV4dFswXSBpbiBcIkAjJCUmKistIT86LidcXFwiL1wiIG9yIC9bQS1aYS16XS8udGVzdCBsYXJnZXJUZXh0WzBdXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBsYXJnZXJUZXh0WzBdIGluIFwiJ1xcXCJcIiAjIGdyb3cgc3RyaW5ncyBpbiBib3RoIGRpcmVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuciA9IFtzZWxbMF0sIFtzZWxbMV1bMF0tMSwgc2VsWzFdWzFdKzFdXSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudCA9IEB0ZXh0SW5SYW5nZSBuclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG50W250Lmxlbmd0aC0xXSA9PSBsYXJnZXJUZXh0WzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcmdlclRleHQgPSBudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJnZXJSYW5nZSA9IG5yXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIC9bQS1aYS16XS8udGVzdCBsYXJnZXJUZXh0WzBdICMgZ3JvdyB3aG9sZSB3b3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIGxhcmdlclJhbmdlWzFdWzBdID4gMCBhbmQgL1tBLVphLXpdLy50ZXN0IEBsaW5lKGxhcmdlclJhbmdlWzBdKVtsYXJnZXJSYW5nZVsxXVswXS0xXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJnZXJSYW5nZVsxXVswXSAtPSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcmdlclRleHQgPSBAdGV4dEluUmFuZ2UgbGFyZ2VyUmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBsYXJnZXJUZXh0ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBAc2VsZWN0U2luZ2xlUmFuZ2UgbGFyZ2VyUmFuZ2UgaWYgQG51bVNlbGVjdGlvbnMoKSA9PSAxXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEBzZXRIaWdobGlnaHRzIEByYW5nZXNGb3JUZXh0IHRleHQsIG1heDo5OTk5XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICMgdGhpcyBzaG91bGQgYmUgZG9uZSBzb21ld2hlcmUgZWxzZSAoY29tbWFuZGxpbmUgb3IgZmluZC9zZWFyY2ggY29tbWFuZHMpXG4gICAgICAgICAgICBpZiBAcmVuZGVySGlnaGxpZ2h0cz9cbiAgICAgICAgICAgICAgICBAcmVuZGVySGlnaGxpZ2h0cygpXG4gICAgICAgICAgICAgICAgQGVtaXQgJ2hpZ2hsaWdodCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgQGZvY3VzKClcblxuICAgICMgIDAwMDAwMDAgIDAwMCAgICAgIDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwICAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAgMDAwMDAwMCAgMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICBcbiAgICBjbGVhckhpZ2hsaWdodHM6IC0+XG4gICAgICAgIFxuICAgICAgICBpZiBAbnVtSGlnaGxpZ2h0cygpXG4gICAgICAgICAgICBAc2V0SGlnaGxpZ2h0cyBbXVxuICAgICAgICAgICAgQGVtaXQgJ2hpZ2hsaWdodCdcbiAgICAgICAgICAgIFxuICAgICMgMDAwMDAwMDAgICAwMDAwMDAwMCAgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAgMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwIDAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgICAwICAgICAgMDAwMDAwMDAgIFxuICAgIFxuICAgIHJlbW92ZVNlbGVjdGVkSGlnaGxpZ2h0OiAtPiAjIGNvbW1hbmQrc2hpZnQrZFxuICAgICAgICBcbiAgICAgICAgY3AgPSBAY3Vyc29yUG9zKClcbiAgICAgICAgc2VsID0gQHNlbGVjdGlvbnMoKVxuICAgICAgICBzciA9IHJhbmdlQXRQb3NJblJhbmdlcyBjcCwgc2VsXG4gICAgICAgIGhyID0gcmFuZ2VBdFBvc0luUmFuZ2VzIGNwLCBAaGlnaGxpZ2h0cygpXG4gICAgICAgIGlmIHNyIGFuZCBoclxuICAgICAgICAgICAgQHJlbW92ZVNlbGVjdGlvbkF0SW5kZXggc2VsLmluZGV4T2Ygc3IgXG4iXX0=
//# sourceURL=../../../coffee/editor/actions/highlight.coffee