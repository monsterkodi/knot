
/*
00     00   0000000   0000000    00000000
000   000  000   000  000   000  000     
000000000  000   000  000   000  0000000 
000 0 000  000   000  000   000  000     
000   000   0000000   0000000    00000000
 */
var Mode, empty, log, ref;

ref = require('kxk'), empty = ref.empty, log = ref.log;

Mode = (function() {
  function Mode() {}

  Mode.set = function(buffer, params) {
    var i, j, ref1;
    if (typeof params === 'object') {
      for (i = j = 0, ref1 = params.length; 0 <= ref1 ? j < ref1 : j > ref1; i = 0 <= ref1 ? ++j : --j) {
        Mode.set(buffer, params[i]);
      }
      return;
    }
    if (empty(buffer.prefix)) {
      switch (params) {
        case 4:
          return buffer.insertMode = true;
      }
    } else if (buffer.prefix === '?') {
      switch (params) {
        case 1:
          log('applicationCursor!');
          return buffer.applicationCursor = true;
        case 2:
          buffer.setgCharset(0, Terminal.charsets.US);
          buffer.setgCharset(1, Terminal.charsets.US);
          buffer.setgCharset(2, Terminal.charsets.US);
          return buffer.setgCharset(3, Terminal.charsets.US);
        case 3:
          buffer.savedCols = buffer.cols;
          return buffer.resize(132, buffer.rows);
        case 6:
          return buffer.originMode = true;
        case 7:
          return buffer.wraparoundMode = true;
        case 1003:
          buffer.x10Mouse = params === 9;
          buffer.vt200Mouse = params === 1000;
          buffer.normalMouse = params > 1000;
          buffer.mouseEvents = true;
          buffer.element.style.cursor = 'default';
          return log('Binding to mouse events');
        case 1004:
          return buffer.sendFocus = true;
        case 1005:
          return buffer.utfMouse = true;
        case 1006:
          return buffer.sgrMouse = true;
        case 1015:
          return buffer.urxvtMouse = true;
        case 25:
          return buffer.cursorHidden = false;
        case 1049:
          return log('alt screen buffer cursor');
        case 47:
          return log('alt screen buffer');
        case 2004:
          return log('xterm bracketed paste mode');
        default:
          return log("unhandled mode ? " + params);
      }
    }
  };

  Mode.reset = function(buffer, params) {
    var i, j, ref1;
    if (typeof params === 'object') {
      for (i = j = 0, ref1 = params.length; 0 <= ref1 ? j < ref1 : j > ref1; i = 0 <= ref1 ? ++j : --j) {
        Mode.reset(buffer, params[i]);
      }
      return;
    }
    if (empty(buffer.prefix)) {
      switch (params) {
        case 4:
          return buffer.insertMode = false;
        case 20:
          return buffer.convertEol = false;
      }
    } else if (buffer.prefix === '?') {
      switch (params) {
        case 1:
          return buffer.applicationCursor = false;
        case 3:
          if (buffer.cols === 132 && buffer.savedCols) {
            buffer.resize(buffer.savedCols, buffer.rows);
          }
          return delete buffer.savedCols;
        case 6:
          return buffer.originMode = false;
        case 7:
          return buffer.wraparoundMode = false;
        case 12:
          return buffer.cursorBlink = false;
        case 25:
          return buffer.cursorHidden = true;
        case 66:
          return buffer.applicationKeypad = false;
        case 9:
        case 1000:
        case 1002:
        case 1003:
          buffer.x10Mouse = false;
          buffer.vt200Mouse = false;
          buffer.normalMouse = false;
          buffer.mouseEvents = false;
          return buffer.element.style.cursor = '';
        case 1004:
          return buffer.sendFocus = false;
        case 1005:
          return buffer.utfMouse = false;
        case 1006:
          return buffer.sgrMouse = false;
        case 1015:
          return buffer.urxvtMouse = false;
        case 1047:
        case 1049:
        case 47:
          return log('normal');
      }
    }
  };

  return Mode;

})();

module.exports = Mode;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZS5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUFpQixPQUFBLENBQVEsS0FBUixDQUFqQixFQUFFLGlCQUFGLEVBQVM7O0FBRUg7OztFQVFGLElBQUMsQ0FBQSxHQUFELEdBQU0sU0FBQyxNQUFELEVBQVMsTUFBVDtBQUVGLFFBQUE7SUFBQSxJQUFHLE9BQU8sTUFBUCxLQUFrQixRQUFyQjtBQUNJLFdBQVMsMkZBQVQ7UUFDSSxJQUFJLENBQUMsR0FBTCxDQUFTLE1BQVQsRUFBaUIsTUFBTyxDQUFBLENBQUEsQ0FBeEI7QUFESjtBQUVBLGFBSEo7O0lBS0EsSUFBRyxLQUFBLENBQU0sTUFBTSxDQUFDLE1BQWIsQ0FBSDtBQUVJLGNBQU8sTUFBUDtBQUFBLGFBQ1MsQ0FEVDtpQkFFUSxNQUFNLENBQUMsVUFBUCxHQUFvQjtBQUY1QixPQUZKO0tBQUEsTUFNSyxJQUFHLE1BQU0sQ0FBQyxNQUFQLEtBQWlCLEdBQXBCO0FBRUQsY0FBTyxNQUFQO0FBQUEsYUFDUyxDQURUO1VBRVEsR0FBQSxDQUFJLG9CQUFKO2lCQUNBLE1BQU0sQ0FBQyxpQkFBUCxHQUEyQjtBQUhuQyxhQUtTLENBTFQ7VUFNUSxNQUFNLENBQUMsV0FBUCxDQUFtQixDQUFuQixFQUFzQixRQUFRLENBQUMsUUFBUSxDQUFDLEVBQXhDO1VBQ0EsTUFBTSxDQUFDLFdBQVAsQ0FBbUIsQ0FBbkIsRUFBc0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUF4QztVQUNBLE1BQU0sQ0FBQyxXQUFQLENBQW1CLENBQW5CLEVBQXNCLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBeEM7aUJBQ0EsTUFBTSxDQUFDLFdBQVAsQ0FBbUIsQ0FBbkIsRUFBc0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUF4QztBQVRSLGFBV1MsQ0FYVDtVQVlRLE1BQU0sQ0FBQyxTQUFQLEdBQW1CLE1BQU0sQ0FBQztpQkFDMUIs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QUFPLENBQUMsS0FBSyxDQUFDLE1BQXJCLEdBQThCO0FBOUJ0QyxhQWdDUyxJQWhDVDtpQkFpQ1EsTUFBTSxDQUFDLFNBQVAsR0FBbUI7QUFqQzNCLGFBbUNTLElBbkNUO2lCQW9DUSxNQUFNLENBQUMsUUFBUCxHQUFrQjtBQXBDMUIsYUFzQ1MsSUF0Q1Q7aUJBdUNRLE1BQU0sQ0FBQyxRQUFQLEdBQWtCO0FBdkMxQixhQXlDUyxJQXpDVDtpQkEwQ1EsTUFBTSxDQUFDLFVBQVAsR0FBb0I7QUExQzVCLGFBNENTLElBNUNUO0FBQUEsYUE0Q2UsSUE1Q2Y7QUFBQSxhQTRDcUIsRUE1Q3JCO2lCQTZDUSxHQUFBLENBQUksUUFBSjtBQTdDUixPQUpDOztFQWxCRDs7Ozs7O0FBaUZaLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMCAgICAgMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICBcbjAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgXG4wMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIFxuMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMDBcbiMjI1xuXG57IGVtcHR5LCBsb2cgfSA9IHJlcXVpcmUgJ2t4aydcblxuY2xhc3MgTW9kZVxuICAgIFxuICAgICMgIDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICAgIFxuICAgICMgMDAwMDAwMCAgIDAwMDAwMDAgICAgICAwMDAgICAgIFxuICAgICMgICAgICAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIFxuICAgICMgMDAwMDAwMCAgIDAwMDAwMDAwICAgICAwMDAgICAgIFxuICAgIFxuICAgIEBzZXQ6IChidWZmZXIsIHBhcmFtcykgLT5cbiAgICAgICAgXG4gICAgICAgIGlmIHR5cGVvZihwYXJhbXMpID09ICdvYmplY3QnXG4gICAgICAgICAgICBmb3IgaSBpbiBbMC4uLnBhcmFtcy5sZW5ndGhdXG4gICAgICAgICAgICAgICAgTW9kZS5zZXQgYnVmZmVyLCBwYXJhbXNbaV1cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgXG4gICAgICAgIGlmIGVtcHR5IGJ1ZmZlci5wcmVmaXhcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoIHBhcmFtc1xuICAgICAgICAgICAgICAgIHdoZW4gNFxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuaW5zZXJ0TW9kZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICBlbHNlIGlmIGJ1ZmZlci5wcmVmaXggPT0gJz8nXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN3aXRjaCBwYXJhbXNcbiAgICAgICAgICAgICAgICB3aGVuIDFcbiAgICAgICAgICAgICAgICAgICAgbG9nICdhcHBsaWNhdGlvbkN1cnNvciEnXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5hcHBsaWNhdGlvbkN1cnNvciA9IHRydWVcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gMlxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuc2V0Z0NoYXJzZXQoMCwgVGVybWluYWwuY2hhcnNldHMuVVMpXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5zZXRnQ2hhcnNldCgxLCBUZXJtaW5hbC5jaGFyc2V0cy5VUylcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnNldGdDaGFyc2V0KDIsIFRlcm1pbmFsLmNoYXJzZXRzLlVTKVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuc2V0Z0NoYXJzZXQoMywgVGVybWluYWwuY2hhcnNldHMuVVMpXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDMgXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5zYXZlZENvbHMgPSBidWZmZXIuY29sc1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIucmVzaXplIDEzMiwgYnVmZmVyLnJvd3NcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gNlxuICAgICAgICAgICAgICAgICAgICBidWZmZXIub3JpZ2luTW9kZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gN1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIud3JhcGFyb3VuZE1vZGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDEwMDMgIyBhbnkgZXZlbnQgbW91c2VcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLngxME1vdXNlID0gcGFyYW1zID09IDlcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnZ0MjAwTW91c2UgPSBwYXJhbXMgPT0gMTAwMFxuICAgICAgICAgICAgICAgICAgICBidWZmZXIubm9ybWFsTW91c2UgPSBwYXJhbXMgPiAxMDAwXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5tb3VzZUV2ZW50cyA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLmVsZW1lbnQuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnXG4gICAgICAgICAgICAgICAgICAgIGxvZyAnQmluZGluZyB0byBtb3VzZSBldmVudHMnXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDEwMDQgIyBzZW5kIGZvY3VzaW4vZm9jdXNvdXQgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5zZW5kRm9jdXMgPSB0cnVlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDEwMDUgIyB1dGY4IGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci51dGZNb3VzZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gMTAwNiAjIHNnciBleHQgbW9kZSBtb3VzZVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuc2dyTW91c2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDEwMTUgIyB1cnh2dCBleHQgbW9kZSBtb3VzZVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIudXJ4dnRNb3VzZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gMjVcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLmN1cnNvckhpZGRlbiA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDEwNDlcbiAgICAgICAgICAgICAgICAgICAgbG9nICdhbHQgc2NyZWVuIGJ1ZmZlciBjdXJzb3InXG4gICAgICAgICAgICAgICAgd2hlbiA0NyAgXG4gICAgICAgICAgICAgICAgICAgIGxvZyAnYWx0IHNjcmVlbiBidWZmZXInXG4gICAgICAgICAgICAgICAgd2hlbiAyMDA0XG4gICAgICAgICAgICAgICAgICAgIGxvZyAneHRlcm0gYnJhY2tldGVkIHBhc3RlIG1vZGUnXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBsb2cgXCJ1bmhhbmRsZWQgbW9kZSA/ICN7cGFyYW1zfVwiXG4gICAgICAgICAgICAgICAgIyB3aGVuIDEwNDcgIyBhbHQgc2NyZWVuIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAgIyBpZiAoIWJ1ZmZlci5ub3JtYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgIyBub3JtYWwgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgIyBsaW5lcyBidWZmZXIubGluZXMsXG4gICAgICAgICAgICAgICAgICAgICAgIyB5YmFzZSBidWZmZXIueWJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgIyB5ZGlzcCBidWZmZXIueWRpc3AsXG4gICAgICAgICAgICAgICAgICAgICAgIyB4IGJ1ZmZlci54LFxuICAgICAgICAgICAgICAgICAgICAgICMgeSBidWZmZXIueSxcbiAgICAgICAgICAgICAgICAgICAgICAjIHNjcm9sbFRvcCBidWZmZXIuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgICAgICAgICMgc2Nyb2xsQm90dG9tIGJ1ZmZlci5zY3JvbGxCb3R0b20sXG4gICAgICAgICAgICAgICAgICAgICAgIyB0YWJzIGJ1ZmZlci50YWJzXG4gICAgICAgICAgICAgICAgICAgICMgfVxuICAgICAgICAgICAgICAgICAgICAjIGJ1ZmZlci5yZXNldCgpXG4gICAgICAgICAgICAgICAgICAgICMgYnVmZmVyLm5vcm1hbCA9IG5vcm1hbFxuICAgICAgICAgICAgICAgICAgICAjIGJ1ZmZlci5zaG93Q3Vyc29yKClcblxuICAgICMgMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICAgIFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgICAwMDAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgICAgICAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAwICAgICAwMDAgICAgIFxuICAgIFxuICAgIEByZXNldDogKGJ1ZmZlciwgcGFyYW1zKSAtPlxuICAgICAgICBcbiAgICAgICAgaWYgdHlwZW9mKHBhcmFtcykgPT0gJ29iamVjdCdcbiAgICAgICAgICAgIGZvciBpIGluIFswLi4ucGFyYW1zLmxlbmd0aF1cbiAgICAgICAgICAgICAgICBNb2RlLnJlc2V0IGJ1ZmZlciwgcGFyYW1zW2ldXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgXG4gICAgICAgICMgbG9nICdNb2RlLnJlc2V0IHBhcmFtcycsIHBhcmFtcywgYnVmZmVyLnByZWZpeFxuICAgICAgICAgICAgXG4gICAgICAgIGlmIGVtcHR5IGJ1ZmZlci5wcmVmaXhcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoIHBhcmFtc1xuICAgICAgICAgICAgICAgIHdoZW4gNFxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuaW5zZXJ0TW9kZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gMjBcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLmNvbnZlcnRFb2wgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgZWxzZSBpZiBidWZmZXIucHJlZml4ID09ICc/J1xuICAgICAgICBcbiAgICAgICAgICAgICMgbG9nICdNb2RlLnJlc2V0J1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2ggcGFyYW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gMVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuYXBwbGljYXRpb25DdXJzb3IgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDNcbiAgICAgICAgICAgICAgICAgICAgaWYgYnVmZmVyLmNvbHMgPT0gMTMyIGFuZCBidWZmZXIuc2F2ZWRDb2xzXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIucmVzaXplIGJ1ZmZlci5zYXZlZENvbHMsIGJ1ZmZlci5yb3dzXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBidWZmZXIuc2F2ZWRDb2xzXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gNlxuICAgICAgICAgICAgICAgICAgICBidWZmZXIub3JpZ2luTW9kZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gN1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIud3JhcGFyb3VuZE1vZGUgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDEyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5jdXJzb3JCbGluayA9IGZhbHNlXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hlbiAyNSAjIGhpZGUgY3Vyc29yXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5jdXJzb3JIaWRkZW4gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gNjZcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLmFwcGxpY2F0aW9uS2V5cGFkID0gZmFsc2VcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGVuIDksIDEwMDAsIDEwMDIsIDEwMDMgIyBhbnkgZXZlbnQgbW91c2VcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLngxME1vdXNlID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnZ0MjAwTW91c2UgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIubm9ybWFsTW91c2UgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIubW91c2VFdmVudHMgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuZWxlbWVudC5zdHlsZS5jdXJzb3IgPSAnJ1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gMTAwNCAjIHNlbmQgZm9jdXNpbi9mb2N1c291dCBldmVudHNcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnNlbmRGb2N1cyA9IGZhbHNlXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hlbiAxMDA1ICMgdXRmOCBleHQgbW9kZSBtb3VzZVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIudXRmTW91c2UgPSBmYWxzZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gMTAwNiAjIHNnciBleHQgbW9kZSBtb3VzZVxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuc2dyTW91c2UgPSBmYWxzZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdoZW4gMTAxNSAjIHVyeHZ0IGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci51cnh2dE1vdXNlID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hlbiAxMDQ3LCAxMDQ5LCA0NyAjIG5vcm1hbCBzY3JlZW4gYnVmZmVyIC0gY2xlYXJpbmcgaXQgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgbG9nICdub3JtYWwnXG4gICAgICAgICAgICAgICAgICAgICMgaWYgYnVmZmVyLm5vcm1hbFxuICAgICAgICAgICAgICAgICAgICAgICAgIyB0aGlzLmxpbmVzID0gdGhpcy5ub3JtYWwubGluZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICMgdGhpcy55YmFzZSA9IHRoaXMubm9ybWFsLnliYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAjIHRoaXMueWRpc3AgPSB0aGlzLm5vcm1hbC55ZGlzcFxuICAgICAgICAgICAgICAgICAgICAgICAgIyBidWZmZXIueCA9IHRoaXMubm9ybWFsLnhcbiAgICAgICAgICAgICAgICAgICAgICAgICMgYnVmZmVyLnkgPSB0aGlzLm5vcm1hbC55XG4gICAgICAgICAgICAgICAgICAgICAgICAjIHRoaXMuc2Nyb2xsVG9wID0gdGhpcy5ub3JtYWwuc2Nyb2xsVG9wXG4gICAgICAgICAgICAgICAgICAgICAgICAjIHRoaXMuc2Nyb2xsQm90dG9tID0gdGhpcy5ub3JtYWwuc2Nyb2xsQm90dG9tXG4gICAgICAgICAgICAgICAgICAgICAgICAjIHRoaXMudGFicyA9IHRoaXMubm9ybWFsLnRhYnNcbiAgICAgICAgICAgICAgICAgICAgICAgICMgdGhpcy5ub3JtYWwgPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAjIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgIyB0aGlzLnNob3dDdXJzb3IoKVxuICAgICAgICAgICAgICAgICAgICBcbm1vZHVsZS5leHBvcnRzID0gTW9kZVxuIl19
//# sourceURL=../coffee/mode.coffee