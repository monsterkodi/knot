// koffee 1.3.0

/*
 0000000   0000000  00000000    0000000   000      000      0000000     0000000   00000000
000       000       000   000  000   000  000      000      000   000  000   000  000   000
0000000   000       0000000    000   000  000      000      0000000    000000000  0000000
     000  000       000   000  000   000  000      000      000   000  000   000  000   000
0000000    0000000  000   000   0000000   0000000  0000000  0000000    000   000  000   000
 */
var Scrollbar, clamp, drag, elem, post, ref, stopEvent,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('kxk'), post = ref.post, stopEvent = ref.stopEvent, elem = ref.elem, clamp = ref.clamp, drag = ref.drag;

Scrollbar = (function() {
    function Scrollbar(scroll) {
        this.scroll = scroll;
        this.update = bind(this.update, this);
        this.clear = bind(this.clear, this);
        this.wheelScroll = bind(this.wheelScroll, this);
        this.onWheel = bind(this.onWheel, this);
        this.onDrag = bind(this.onDrag, this);
        this.onStart = bind(this.onStart, this);
        post.on('scroll', this.update);
        post.on('clearLines', this.clear);
        this.view = this.scroll.view.parentNode;
        this.elem = elem({
            "class": 'scrollbar left'
        });
        this.view.appendChild(this.elem);
        this.handle = elem({
            "class": 'scrollhandle left'
        });
        this.elem.appendChild(this.handle);
        this.scrollX = 0;
        this.scrollY = 0;
        this.drag = new drag({
            target: this.elem,
            onStart: this.onStart,
            onMove: this.onDrag,
            cursor: 'ns-resize'
        });
    }

    Scrollbar.prototype.onStart = function(drag, event) {
        var br, ln, ly, sy;
        br = this.elem.getBoundingClientRect();
        sy = clamp(0, this.scroll.viewHeight, event.clientY - br.top);
        ln = parseInt(this.scroll.numLines * sy / this.scroll.viewHeight);
        ly = (ln - this.scroll.viewLines / 2) * this.scroll.lineHeight;
        return this.scroll.to(ly);
    };

    Scrollbar.prototype.onDrag = function(drag) {
        var delta;
        delta = (drag.delta.y / (this.scroll.viewLines * this.scroll.lineHeight)) * this.scroll.fullHeight;
        return this.scroll.by(delta);
    };

    Scrollbar.prototype.onWheel = function(event) {
        var scrollFactor;
        scrollFactor = function() {
            var f;
            f = 1;
            f *= 1 + 1 * event.shiftKey;
            f *= 1 + 3 * event.ctrlKey;
            return f *= 1 + 7 * event.altKey;
        };
        if (Math.abs(event.deltaX) >= 2 * Math.abs(event.deltaY) || Math.abs(event.deltaY) === 0) {
            this.scrollX += event.deltaX;
        } else {
            this.scrollY += event.deltaY * scrollFactor();
        }
        if (this.scrollX || this.scrollY) {
            window.requestAnimationFrame(this.wheelScroll);
        }
        return stopEvent(event);
    };

    Scrollbar.prototype.wheelScroll = function() {
        this.scroll.by(this.scrollY, this.scrollX);
        return this.scrollX = this.scrollY = 0;
    };

    Scrollbar.prototype.clear = function() {
        this.handle.style.top = "0";
        this.handle.style.height = "0";
        return this.handle.style.width = "0";
    };

    Scrollbar.prototype.update = function() {
        var bh, cf, cs, fadeColor, longColor, scrollHeight, scrollTop, shortColor, vh;
        if (this.scroll.numLines * this.scroll.lineHeight < this.scroll.viewHeight) {
            return this.clear();
        } else {
            bh = this.scroll.numLines * this.scroll.lineHeight;
            vh = Math.min(this.scroll.viewLines * this.scroll.lineHeight, this.scroll.viewHeight);
            scrollTop = parseInt((this.scroll.scroll / bh) * vh);
            scrollHeight = parseInt(((this.scroll.viewLines * this.scroll.lineHeight) / bh) * vh);
            scrollHeight = Math.max(scrollHeight, parseInt(this.scroll.lineHeight / 4));
            scrollTop = Math.min(scrollTop, this.scroll.viewHeight - scrollHeight);
            scrollTop = Math.max(0, scrollTop);
            this.handle.style.top = scrollTop + "px";
            this.handle.style.height = scrollHeight + "px";
            this.handle.style.width = "2px";
            cf = 1 - clamp(0, 1, (scrollHeight - 10) / 200);
            longColor = [94, 94, 94];
            shortColor = [128, 128, 256];
            fadeColor = function(av, bv, f) {
                var fv, i, j;
                fv = [0, 0, 0];
                for (i = j = 0; j < 3; i = ++j) {
                    fv[i] = Math.round((1 - f) * av[i] + f * bv[i]);
                }
                return "rgb(" + fv[0] + ", " + fv[1] + ", " + fv[2] + ")";
            };
            cs = fadeColor(longColor, shortColor, cf);
            return this.handle.style.backgroundColor = cs;
        }
    };

    return Scrollbar;

})();

module.exports = Scrollbar;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQSxrREFBQTtJQUFBOztBQVFBLE1BQXlDLE9BQUEsQ0FBUSxLQUFSLENBQXpDLEVBQUUsZUFBRixFQUFRLHlCQUFSLEVBQW1CLGVBQW5CLEVBQXlCLGlCQUF6QixFQUFnQzs7QUFFMUI7SUFFVyxtQkFBQyxNQUFEO1FBQUMsSUFBQyxDQUFBLFNBQUQ7Ozs7Ozs7UUFFVixJQUFJLENBQUMsRUFBTCxDQUFRLFFBQVIsRUFBc0IsSUFBQyxDQUFBLE1BQXZCO1FBQ0EsSUFBSSxDQUFDLEVBQUwsQ0FBUSxZQUFSLEVBQXNCLElBQUMsQ0FBQSxLQUF2QjtRQUVBLElBQUMsQ0FBQSxJQUFELEdBQVEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFFckIsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFBLENBQUs7WUFBQSxDQUFBLEtBQUEsQ0FBQSxFQUFPLGdCQUFQO1NBQUw7UUFDUixJQUFDLENBQUEsSUFBSSxDQUFDLFdBQU4sQ0FBa0IsSUFBQyxDQUFBLElBQW5CO1FBRUEsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFBLENBQUs7WUFBQSxDQUFBLEtBQUEsQ0FBQSxFQUFPLG1CQUFQO1NBQUw7UUFDVixJQUFDLENBQUEsSUFBSSxDQUFDLFdBQU4sQ0FBa0IsSUFBQyxDQUFBLE1BQW5CO1FBRUEsSUFBQyxDQUFBLE9BQUQsR0FBWTtRQUNaLElBQUMsQ0FBQSxPQUFELEdBQVk7UUFFWixJQUFDLENBQUEsSUFBRCxHQUFRLElBQUksSUFBSixDQUNKO1lBQUEsTUFBQSxFQUFTLElBQUMsQ0FBQSxJQUFWO1lBQ0EsT0FBQSxFQUFTLElBQUMsQ0FBQSxPQURWO1lBRUEsTUFBQSxFQUFTLElBQUMsQ0FBQSxNQUZWO1lBR0EsTUFBQSxFQUFTLFdBSFQ7U0FESTtJQWhCQzs7d0JBNEJiLE9BQUEsR0FBUyxTQUFDLElB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QUFDLEdBQUQsRUFBSyxHQUFMLEVBQVMsR0FBVDtZQUViLFNBQUEsR0FBWSxTQUFDLEVBQUQsRUFBSyxFQUFMLEVBQVMsQ0FBVDtBQUNSLG9CQUFBO2dCQUFBLEVBQUEsR0FBSyxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTDtBQUNMLHFCQUFTLHlCQUFUO29CQUNJLEVBQUcsQ0FBQSxDQUFBLENBQUgsR0FBUSxJQUFJLENBQUMsS0FBTCxDQUFXLENBQUMsQ0FBQSxHQUFFLENBQUgsQ0FBQSxHQUFRLEVBQUcsQ0FBQSxDQUFBLENBQVgsR0FBZ0IsQ0FBQSxHQUFJLEVBQUcsQ0FBQSxDQUFBLENBQWxDO0FBRFo7dUJBRUEsTUFBQSxHQUFPLEVBQUcsQ0FBQSxDQUFBLENBQVYsR0FBYSxJQUFiLEdBQWlCLEVBQUcsQ0FBQSxDQUFBLENBQXBCLEdBQXVCLElBQXZCLEdBQTJCLEVBQUcsQ0FBQSxDQUFBLENBQTlCLEdBQWlDO1lBSnpCO1lBTVosRUFBQSxHQUFLLFNBQUEsQ0FBVSxTQUFWLEVBQXFCLFVBQXJCLEVBQWlDLEVBQWpDO21CQUNMLElBQUMsQ0FBQSxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWQsR0FBZ0MsR0E3QnBDOztJQUZJOzs7Ozs7QUFpQ1osTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbiAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgICAgIDAwMCAgICAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAwMDAwMFxuMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAwMDAwMCAgIDAwMCAgICAgICAwMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMDAwMDBcbiAgICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcbjAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAgIDAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAgICAwMDBcbiMjI1xuXG57IHBvc3QsIHN0b3BFdmVudCwgZWxlbSwgY2xhbXAsIGRyYWcgfSA9IHJlcXVpcmUgJ2t4aydcblxuY2xhc3MgU2Nyb2xsYmFyXG5cbiAgICBjb25zdHJ1Y3RvcjogKEBzY3JvbGwpIC0+XG5cbiAgICAgICAgcG9zdC5vbiAnc2Nyb2xsJywgICAgIEB1cGRhdGVcbiAgICAgICAgcG9zdC5vbiAnY2xlYXJMaW5lcycsIEBjbGVhclxuXG4gICAgICAgIEB2aWV3ID0gQHNjcm9sbC52aWV3LnBhcmVudE5vZGVcbiAgICAgICAgXG4gICAgICAgIEBlbGVtID0gZWxlbSBjbGFzczogJ3Njcm9sbGJhciBsZWZ0J1xuICAgICAgICBAdmlldy5hcHBlbmRDaGlsZCBAZWxlbVxuXG4gICAgICAgIEBoYW5kbGUgPSBlbGVtIGNsYXNzOiAnc2Nyb2xsaGFuZGxlIGxlZnQnXG4gICAgICAgIEBlbGVtLmFwcGVuZENoaWxkIEBoYW5kbGVcblxuICAgICAgICBAc2Nyb2xsWCAgPSAwXG4gICAgICAgIEBzY3JvbGxZICA9IDBcblxuICAgICAgICBAZHJhZyA9IG5ldyBkcmFnXG4gICAgICAgICAgICB0YXJnZXQ6ICBAZWxlbVxuICAgICAgICAgICAgb25TdGFydDogQG9uU3RhcnRcbiAgICAgICAgICAgIG9uTW92ZTogIEBvbkRyYWdcbiAgICAgICAgICAgIGN1cnNvcjogICducy1yZXNpemUnXG5cbiAgICAjICAwMDAwMDAwICAwMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwMDBcbiAgICAjIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDBcbiAgICAjIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAgICAwMDBcbiAgICAjICAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDBcbiAgICAjIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDBcblxuICAgIG9uU3RhcnQ6IChkcmFnLCBldmVudCkgPT5cblxuICAgICAgICBiciA9IEBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgIHN5ID0gY2xhbXAgMCwgQHNjcm9sbC52aWV3SGVpZ2h0LCBldmVudC5jbGllbnRZIC0gYnIudG9wXG4gICAgICAgIGxuID0gcGFyc2VJbnQgQHNjcm9sbC5udW1MaW5lcyAqIHN5L0BzY3JvbGwudmlld0hlaWdodFxuICAgICAgICBseSA9IChsbiAtIEBzY3JvbGwudmlld0xpbmVzIC8gMikgKiBAc2Nyb2xsLmxpbmVIZWlnaHRcbiAgICAgICAgQHNjcm9sbC50byBseVxuXG4gICAgIyAwMDAwMDAwICAgIDAwMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMDAwICAwMDAgIDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDBcblxuICAgIG9uRHJhZzogKGRyYWcpID0+XG5cbiAgICAgICAgZGVsdGEgPSAoZHJhZy5kZWx0YS55IC8gKEBzY3JvbGwudmlld0xpbmVzICogQHNjcm9sbC5saW5lSGVpZ2h0KSkgKiBAc2Nyb2xsLmZ1bGxIZWlnaHRcbiAgICAgICAgQHNjcm9sbC5ieSBkZWx0YVxuXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDBcbiAgICAjIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMFxuICAgICMgMDAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDBcbiAgICAjIDAwICAgICAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMDAwMDBcblxuICAgIG9uV2hlZWw6IChldmVudCkgPT5cblxuICAgICAgICBzY3JvbGxGYWN0b3IgPSAtPlxuICAgICAgICAgICAgZiAgPSAxXG4gICAgICAgICAgICBmICo9IDEgKyAxICogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgICAgIGYgKj0gMSArIDMgKiBldmVudC5jdHJsS2V5XG4gICAgICAgICAgICBmICo9IDEgKyA3ICogZXZlbnQuYWx0S2V5XG5cbiAgICAgICAgaWYgTWF0aC5hYnMoZXZlbnQuZGVsdGFYKSA+PSAyKk1hdGguYWJzKGV2ZW50LmRlbHRhWSkgb3IgTWF0aC5hYnMoZXZlbnQuZGVsdGFZKSA9PSAwXG4gICAgICAgICAgICBAc2Nyb2xsWCArPSBldmVudC5kZWx0YVhcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHNjcm9sbFkgKz0gZXZlbnQuZGVsdGFZICogc2Nyb2xsRmFjdG9yKClcblxuICAgICAgICBpZiBAc2Nyb2xsWCBvciBAc2Nyb2xsWVxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSBAd2hlZWxTY3JvbGxcblxuICAgICAgICBzdG9wRXZlbnQgZXZlbnRcblxuICAgIHdoZWVsU2Nyb2xsOiA9PlxuXG4gICAgICAgIEBzY3JvbGwuYnkgQHNjcm9sbFksIEBzY3JvbGxYXG4gICAgICAgIEBzY3JvbGxYID0gQHNjcm9sbFkgPSAwXG5cbiAgICBjbGVhcjogPT5cbiAgICAgICAgXG4gICAgICAgIEBoYW5kbGUuc3R5bGUudG9wICAgICA9IFwiMFwiXG4gICAgICAgIEBoYW5kbGUuc3R5bGUuaGVpZ2h0ICA9IFwiMFwiXG4gICAgICAgIEBoYW5kbGUuc3R5bGUud2lkdGggICA9IFwiMFwiXG4gICAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMFxuICAgICMgIDAwMDAwMDAgICAwMDAgICAgICAgIDAwMDAwMDAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMDAwMDAwXG5cbiAgICB1cGRhdGU6ID0+XG5cbiAgICAgICAgaWYgQHNjcm9sbC5udW1MaW5lcyAqIEBzY3JvbGwubGluZUhlaWdodCA8IEBzY3JvbGwudmlld0hlaWdodFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBAY2xlYXIoKVxuICAgICAgICAgICAgXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYmggICAgICAgICAgID0gQHNjcm9sbC5udW1MaW5lcyAqIEBzY3JvbGwubGluZUhlaWdodFxuICAgICAgICAgICAgdmggICAgICAgICAgID0gTWF0aC5taW4gKEBzY3JvbGwudmlld0xpbmVzICogQHNjcm9sbC5saW5lSGVpZ2h0KSwgQHNjcm9sbC52aWV3SGVpZ2h0XG4gICAgICAgICAgICBzY3JvbGxUb3AgICAgPSBwYXJzZUludCAoQHNjcm9sbC5zY3JvbGwgLyBiaCkgKiB2aFxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gcGFyc2VJbnQgKChAc2Nyb2xsLnZpZXdMaW5lcyAqIEBzY3JvbGwubGluZUhlaWdodCkgLyBiaCkgKiB2aFxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gTWF0aC5tYXggc2Nyb2xsSGVpZ2h0LCBwYXJzZUludCBAc2Nyb2xsLmxpbmVIZWlnaHQvNFxuICAgICAgICAgICAgc2Nyb2xsVG9wICAgID0gTWF0aC5taW4gc2Nyb2xsVG9wLCBAc2Nyb2xsLnZpZXdIZWlnaHQtc2Nyb2xsSGVpZ2h0XG4gICAgICAgICAgICBzY3JvbGxUb3AgICAgPSBNYXRoLm1heCAwLCBzY3JvbGxUb3BcblxuICAgICAgICAgICAgQGhhbmRsZS5zdHlsZS50b3AgICAgPSBcIiN7c2Nyb2xsVG9wfXB4XCJcbiAgICAgICAgICAgIEBoYW5kbGUuc3R5bGUuaGVpZ2h0ID0gXCIje3Njcm9sbEhlaWdodH1weFwiXG4gICAgICAgICAgICBAaGFuZGxlLnN0eWxlLndpZHRoICA9IFwiMnB4XCJcblxuICAgICAgICAgICAgY2YgPSAxIC0gY2xhbXAgMCwgMSwgKHNjcm9sbEhlaWdodC0xMCkvMjAwXG4gICAgICAgICAgICBsb25nQ29sb3IgID0gWzk0LDk0LDk0XSAjIFwiIzQ0NFwiXG4gICAgICAgICAgICBzaG9ydENvbG9yID0gWzEyOCwxMjgsMjU2XSAjIFwiIzg4ZlwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZhZGVDb2xvciA9IChhdiwgYnYsIGYpIC0+XG4gICAgICAgICAgICAgICAgZnYgPSBbMCwwLDBdXG4gICAgICAgICAgICAgICAgZm9yIGkgaW4gWzAuLi4zXVxuICAgICAgICAgICAgICAgICAgICBmdltpXSA9IE1hdGgucm91bmQgKDEtZikgKiBhdltpXSArIGYgKiBidltpXVxuICAgICAgICAgICAgICAgIFwicmdiKCN7ZnZbMF19LCAje2Z2WzFdfSwgI3tmdlsyXX0pXCJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY3MgPSBmYWRlQ29sb3IgbG9uZ0NvbG9yLCBzaG9ydENvbG9yLCBjZlxuICAgICAgICAgICAgQGhhbmRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjc1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjcm9sbGJhclxuIl19
//# sourceURL=../coffee/scrollbar.coffee